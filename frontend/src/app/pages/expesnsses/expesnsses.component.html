<app-navbar></app-navbar>

<div class="purchases-container">
  <input
    type="text"
    [placeholder]="getTranslation('placeholders.searchByProduct')"
    [(ngModel)]="searchTerm"
    class="form-control mb-3"
  />

  <table>
    <thead>
      <tr>
        <th>{{ getTranslation('tableHeaders.productName') }}</th>
        <th>{{ getTranslation('tableHeaders.amountSpent') }}</th>
        <th>{{ getTranslation('tableHeaders.date') }}</th>
      </tr>
    </thead>
    <tbody>
      <!-- Existing Purchases -->
      <tr *ngFor="let purchase of filteredPurchases | slice:(page-1)*pageSize:(page*pageSize)">
        <td>{{ purchase.productName }}</td>
        <td>{{ purchase.amountSpent | currency:'ILS':'symbol':'1.0-0':'he-IL' }}</td>
        <td>{{ purchase.date | date:'yyyy-MM-dd' }}</td>
      </tr>

      <!-- Input Row -->
      <tr>
        <td>
          <input [placeholder]="getTranslation('placeholders.productName')" [(ngModel)]="newPurchase.productName">
        </td>
        <td>
          <input type="number" [placeholder]="getTranslation('placeholders.amountSpent')" [(ngModel)]="newPurchase.amountSpent">
        </td>
        <td>
          <input type="date" [(ngModel)]="newPurchase.date">
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <div class="pagination">
    <button (click)="page = page - 1" [disabled]="page === 1">
      {{ getTranslation('buttons.prev') }}
    </button>
    <span>
      {{ getTranslation('labels.page') }} {{ page }} {{ getTranslation('labels.of') }} {{ Math.ceil(filteredPurchases.length / pageSize) }}
    </span>
    <button (click)="page = page + 1" [disabled]="page >= Math.ceil(filteredPurchases.length / pageSize)">
      {{ getTranslation('buttons.next') }}
    </button>
  </div>

  <button class="add-btn" (click)="addPurchase()">
    {{ getTranslation('buttons.addPurchase') }}
  </button>
</div>
